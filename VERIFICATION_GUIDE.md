# 论文验证功能使用指南

## 功能说明

论文验证功能可以自动从arXiv列表页面提取论文信息，并通过多种方式验证作者和日期的准确性：

1. **从网页提取**：从arXiv列表页面提取作者和日期
2. **从PDF文本提取**：使用pdf.js从PDF文件中提取文本，解析作者和日期
3. **OCR识别**：将PDF第一页转换为图像，使用OCR识别作者和日期
4. **匹配验证**：对比三种方式提取的结果，验证一致性

## 使用步骤

### 1. 打开arXiv列表页面

访问arXiv列表页面，例如：
- `https://arxiv.org/list/cs/recent` - 计算机科学最新论文
- `https://arxiv.org/list/cs.AI/recent` - 人工智能最新论文
- 或其他arXiv列表页面

### 2. 打开验证界面

1. 点击浏览器工具栏上的插件图标
2. 在弹出窗口中点击 **"验证论文"** 按钮
3. 会打开一个新的验证报告页面

### 3. 开始验证

1. 在验证报告页面中，点击 **"开始验证"** 按钮
2. 插件会自动：
   - 提取当前页面上的所有论文信息
   - 对每篇论文执行完整的验证流程
   - 实时显示验证进度和结果

### 4. 查看验证结果

验证结果会实时显示在页面上，包括：

- **总论文数**：页面上的论文总数
- **已处理**：已完成验证的论文数
- **匹配成功**：作者和日期都匹配的论文数

每个论文的验证结果显示：
- 网页作者、PDF文本作者、OCR作者
- 网页日期、PDF文本日期、OCR日期
- 匹配状态（✓ 匹配成功 / ✗ 匹配失败）

### 5. 导出报告

点击 **"导出报告"** 按钮，可以将验证结果导出为JSON文件。

## 验证流程详解

### 步骤1：提取论文列表

插件会从arXiv列表页面提取每篇论文的：
- 标题
- 作者列表（第一作者）
- 提交日期
- PDF下载链接
- arXiv ID

### 步骤2：PDF文本提取

使用pdf.js库：
- 从PDF URL直接读取PDF文件
- 提取PDF元数据（标题、作者等）
- 读取PDF前500字符的文本内容
- 通过关键词匹配提取日期信息

### 步骤3：OCR识别

1. 将PDF第一页渲染为高分辨率图像（2倍缩放）
2. 使用Tesseract.js OCR引擎识别图像中的文本
3. 从OCR结果中提取作者和日期信息

### 步骤4：匹配验证

对比三种方式提取的结果：
- **作者匹配**：检查三种方式提取的作者是否一致（模糊匹配）
- **日期匹配**：检查三种方式提取的日期年份是否一致

## 验证结果说明

### 匹配成功（绿色边框）

- 作者匹配：网页、PDF文本、OCR三种方式提取的作者一致
- 日期匹配：三种方式提取的日期年份一致

### 匹配失败（红色边框）

- 作者或日期在三种方式中不一致
- 可能原因：
  - PDF格式问题
  - OCR识别错误
  - 网页信息不完整

### 处理中/错误（黄色边框）

- 验证过程中出现错误
- PDF无法访问
- OCR识别失败

## 注意事项

1. **网络连接**：需要稳定的网络连接来加载PDF和OCR库
2. **处理时间**：OCR识别较慢，每篇论文可能需要几秒到十几秒
3. **页面限制**：只能在arXiv列表页面使用此功能
4. **浏览器性能**：处理大量论文时可能影响浏览器性能

## 技术细节

### 使用的库

- **pdf.js 3.11.174**：PDF解析和渲染
- **Tesseract.js 4.1.1**：OCR文字识别

### 提取策略

- **作者提取**：支持多种格式（First M. Last, Last, F.等）
- **日期提取**：支持多种日期格式（YYYY-MM-DD, Month DD YYYY等）
- **匹配算法**：使用模糊匹配，支持部分匹配

## 故障排除

### 无法提取论文列表

- 确认在arXiv列表页面（URL包含 `/list/`）
- 刷新页面后重试
- 检查控制台错误信息

### OCR识别失败

- 检查网络连接（需要加载Tesseract.js）
- PDF第一页可能不包含文本（只有图像）
- 尝试降低处理速度（增加延迟）

### 匹配率低

- 某些PDF格式可能无法正确提取文本
- OCR识别准确度受PDF质量影响
- 网页信息可能不完整

## 导出报告格式

导出的JSON文件包含：

```json
{
  "timestamp": "2025-12-26T...",
  "total": 10,
  "matched": 7,
  "results": [
    {
      "title": "论文标题",
      "webMetadata": {...},
      "pdfTextData": {...},
      "ocrData": {...},
      "matchResult": {...}
    }
  ]
}
```

